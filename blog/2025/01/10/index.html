<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">My exploration of WASM/WASI | DG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/blog/2025/01/10/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="My exploration of WASM/WASI | DG"><meta data-rh="true" name="description" content="Assembler was developed in 1947, wow! It makes 78 years of computing development in which we saw higher level programming languages, virtual machine programming languages (write once run everywhere), virtual machines, cloud and so on. A lot of knowledge got accumulated over the time which you can see in size of artifacts deployed to cloud."><meta data-rh="true" property="og:description" content="Assembler was developed in 1947, wow! It makes 78 years of computing development in which we saw higher level programming languages, virtual machine programming languages (write once run everywhere), virtual machines, cloud and so on. A lot of knowledge got accumulated over the time which you can see in size of artifacts deployed to cloud."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-01-10T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="wasm,microservices,fermyonspin"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/blog/2025/01/10/"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/blog/2025/01/10/" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/blog/2025/01/10/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2025/01/10/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2025/01/10/","url":"https://your-docusaurus-site.example.com/blog/2025/01/10/","headline":"My exploration of WASM/WASI","name":"My exploration of WASM/WASI","description":"Assembler was developed in 1947, wow! It makes 78 years of computing development in which we saw higher level programming languages, virtual machine programming languages (write once run everywhere), virtual machines, cloud and so on. A lot of knowledge got accumulated over the time which you can see in size of artifacts deployed to cloud.","datePublished":"2025-01-10T00:00:00.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://your-docusaurus-site.example.com/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="DG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="DG Atom Feed"><link rel="stylesheet" href="/assets/css/styles.06b657aa.css">
<script src="/assets/js/runtime~main.34728806.js" defer="defer"></script>
<script src="/assets/js/main.6add1264.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025/01/18/">Introducing concurrency solver</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2025/01/10/">My exploration of WASM/WASI</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/12/29/">Christmas with Quantum Mechanics</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/12/15/">Thoughts on observability</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/11/5/">Reflections after writing simple Spring Boot library</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/29/">1BRC Challenge</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/26/">Topology graphs are important (and fun)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/4/">Writing own Kubernetes operator in Java</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">My exploration of WASM/WASI</h1><div class="container_mt6G margin-vert--md"><time datetime="2025-01-10T00:00:00.000Z">January 10, 2025</time> · <!-- -->4 min read</div></header><div id="__blog-post-container" class="markdown"><p>Assembler was developed in 1947, wow! It makes 78 years of computing development in which we saw higher level programming languages, virtual machine programming languages (write once run everywhere), virtual machines, cloud and so on. A lot of knowledge got accumulated over the time which you can see in size of artifacts deployed to cloud.</p>
<p>Over the years we have seen several attempts reach for the roots. Similarly <strong>WebAssembly</strong> is instruction format for virtual machine designed to be portable compilation target for any language willing. It is fast as nearly native speed, secure and sandboxed and language agnostic. Originally wrote for the browsers it is beginning to get traction as microservice runtime, which btw is topic of this post.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-to-jvm">Comparison to JVM<a href="#comparison-to-jvm" class="hash-link" aria-label="Direct link to Comparison to JVM" title="Direct link to Comparison to JVM">​</a></h2>
<p>It is obvious that WASM and JVM share similarities as intermediate-represented runtimes. If you have interpreted language then out of necessity you have to have some mechanism to speed things up. For Java
there is tiered JIT compiler and Wasm also has JIT however there is also possiblity of Ahead of Time Compilation.</p>
<p>Wasm was designed for <em>security, portability, and fast startup</em> and differs in several things from Java.
First of all WASM modules are compact binaries and smaller size means faster loading. Second all the dependencies are pre-bundled and not needed to be loaded dynamically which takes time. And the binary code is already sandboxed which means it does not need to be validated.</p>
<p>But what is most interesting is that WASM bytecode is closer to native binaries than JVM bytecode which means it can be JITed with less effort. Here is why:</p>
<ul>
<li>linear memory model similar to C-style pointers</li>
<li>no GC</li>
<li>basic numeric types</li>
<li>assembly like control flow (loops, branches, direct-calls) versus method invocations</li>
</ul>
<p>It looks like history took whole circle.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-bother">Why bother<a href="#why-bother" class="hash-link" aria-label="Direct link to Why bother" title="Direct link to Why bother">​</a></h2>
<p>Where Wasm will shine in near future is serverless computing, which is now more or less poinless. Imagine deploying 100MB artifact which will spin up in 5 seconds for only ONE function. But with Wasm and it&#x27;s promises to start withing 20ms the task takes whole new dimension.</p>
<p>And of course cloud is money. And where is money (cost savings) there imo will always be political will to move things forward. I&#x27;m pretty sure WebAssembly has bright future, at least for the cloud and edge.</p>
<p>A month ago I watched <a href="https://www.youtube.com/watch?v=fQdkNGZqYZA" target="_blank" rel="noopener noreferrer">this wasmCloud presentation</a> which was an interesting case for the Edge. Imagine that you run a factory with devices with computing constraints. If the gear is spinning 5000 RPMs you have to take corrective action right now, instead of waiting for server to respond. Wasm can be deployed on such machines (Edge) and take necessary actions of control loop while delegating higher level business functions to cloud.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sandboxing-and-formal-verification">Sandboxing and Formal Verification<a href="#sandboxing-and-formal-verification" class="hash-link" aria-label="Direct link to Sandboxing and Formal Verification" title="Direct link to Sandboxing and Formal Verification">​</a></h3>
<p>If computer programs were computationally proven to be correct (formal verification) then there would be no bugs at all. Sandboxing is one step close towards this goal. If you enforce clear boundaries of the system,
which files are used, what is sent on network and so on the security is much easier to reason about without &quot;gaps&quot;. And once you have perfectly isolated component without gaps you can use formal tools to actually prove the logic is correct. I found <a href="https://oa.upm.es/75802/1/TFM_DAVID_MUNUERA_MAZARRO.pdf" target="_blank" rel="noopener noreferrer">something here</a> will take a look in near future.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="webassembly-component-model">WebAssembly Component Model<a href="#webassembly-component-model" class="hash-link" aria-label="Direct link to WebAssembly Component Model" title="Direct link to WebAssembly Component Model">​</a></h3>
<p>So far the application have been run in one-off basis, but standards are emerging which will handle component interactions (microservices). Here is a <a href="https://component-model.bytecodealliance.org/" target="_blank" rel="noopener noreferrer">summary</a>.</p>
<table><thead><tr><th>Word</th><th>Definition</th></tr></thead><tbody><tr><td>component</td><td>a specially wrapped wasm binary that can interact with other components on clear interfaces</td></tr><tr><td>interface</td><td>a contract between components that is language agnostic</td></tr><tr><td>WIT</td><td>interface defnition langauge that you port with componentized applications</td></tr><tr><td>world</td><td>contract between component and runtime</td></tr></tbody></table>
<p>So you basically write the functionality in Rust and <strong>export</strong> functions in Wit. Other component <strong>imports</strong> (also with WIT) these functions and the serialization/deserialization is handled by runtime. wasmCloud claims to also remotely call the imports which is handled with NATS. Why WIT you may ask? Because wasm primtives are just numbers and strings. For high level functionality you need <em>records</em>, <em>tuples</em>, <em>variants</em>, <em>lists</em> and so on.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-now-disapointing">For now disapointing<a href="#for-now-disapointing" class="hash-link" aria-label="Direct link to For now disapointing" title="Direct link to For now disapointing">​</a></h3>
<p>It looks all good but is still in it&#x27;s nascency. This means you probably won&#x27;t see library for your use (if you don&#x27;t write yourself). However there are several runtimes that are under development:</p>
<ul>
<li>wasmCloud</li>
<li>fermyon/spin</li>
<li>wasmEdge</li>
<li>WAGI</li>
<li>and more</li>
</ul>
<p>Right now it is hard to host microservices application with WASI other than communicating via http.</p>
<p>I got carried away and wrote some <a href="https://github.com/vulture-dominiczek/fermyon-spin-eval" target="_blank" rel="noopener noreferrer">number factorization microservice app</a>. Check it out!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3>
<p>It&#x27;s worth following the developments, that&#x27;s for sure. I&#x27;m pretty certain that the bright future is ahead for WASM.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/wasm">wasm</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/fermyonspin">fermyonspin</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025-01-10.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2025/01/18/"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Introducing concurrency solver</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2024/12/29/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Christmas with Quantum Mechanics</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#comparison-to-jvm" class="table-of-contents__link toc-highlight">Comparison to JVM</a></li><li><a href="#why-bother" class="table-of-contents__link toc-highlight">Why bother</a><ul><li><a href="#sandboxing-and-formal-verification" class="table-of-contents__link toc-highlight">Sandboxing and Formal Verification</a></li><li><a href="#webassembly-component-model" class="table-of-contents__link toc-highlight">WebAssembly Component Model</a></li><li><a href="#for-now-disapointing" class="table-of-contents__link toc-highlight">For now disapointing</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"></div></footer></div>
</body>
</html>