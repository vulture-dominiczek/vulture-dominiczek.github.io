<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Blog | DG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/blog"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | DG"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/blog"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/blog" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://your-docusaurus-site.example.com/blog","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2025/01/18/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2025/01/18/","url":"https://your-docusaurus-site.example.com/blog/2025/01/18/","headline":"Introducing concurrency solver","name":"Introducing concurrency solver","description":"Lately at work most of the staff is puzzled with mysterious bug. In short there is a statemachine that","datePublished":"2025-01-18T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2025/01/10/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2025/01/10/","url":"https://your-docusaurus-site.example.com/blog/2025/01/10/","headline":"My exploration of WASM/WASI","name":"My exploration of WASM/WASI","description":"Assembler was developed in 1947, wow! It makes 78 years of computing development in which we saw higher level programming languages, virtual machine programming languages (write once run everywhere), virtual machines, cloud and so on. A lot of knowledge got accumulated over the time which you can see in size of artifacts deployed to cloud.","datePublished":"2025-01-10T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2024/12/29/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2024/12/29/","url":"https://your-docusaurus-site.example.com/blog/2024/12/29/","headline":"Christmas with Quantum Mechanics","name":"Christmas with Quantum Mechanics","description":"Christmas is wonderful time, although not without challenges. Particular challenge for me is to keep mind fresh and not sleep all the time. I like the atmospehere of going to saint masses and eating good food (with couple of drinks) and stuff but as always I felt a little bit lazy.","datePublished":"2024-12-29T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2024/12/15/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2024/12/15/","url":"https://your-docusaurus-site.example.com/blog/2024/12/15/","headline":"Thoughts on observability","name":"Thoughts on observability","description":"Everything is complicated, even those things that seem flat in their bleakness.","datePublished":"2024-12-15T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2024/11/5/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2024/11/5/","url":"https://your-docusaurus-site.example.com/blog/2024/11/5/","headline":"Reflections after writing simple Spring Boot library","name":"Reflections after writing simple Spring Boot library","description":"*Sometimes learning from adversity is better than trying to avoid it.","datePublished":"2024-11-05T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2024/10/29/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2024/10/29/","url":"https://your-docusaurus-site.example.com/blog/2024/10/29/","headline":"1BRC Challenge","name":"1BRC Challenge","description":"One thing that recently got nerd the hell out of me was 1 billion row challenge. Citing the original site:","datePublished":"2024-10-29T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2024/10/26/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2024/10/26/","url":"https://your-docusaurus-site.example.com/blog/2024/10/26/","headline":"Topology graphs are important (and fun)","name":"Topology graphs are important (and fun)","description":"Recently I watched the presentation from Microsoft about Radius. They developed the tool to foster the collaboration between devops and developers. In nutshell devops create \"recipies\" in Bicep or Terraform and developers use them to deploy the application. Seems cool.","datePublished":"2024-10-26T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://your-docusaurus-site.example.com/blog/2024/10/4/","mainEntityOfPage":"https://your-docusaurus-site.example.com/blog/2024/10/4/","url":"https://your-docusaurus-site.example.com/blog/2024/10/4/","headline":"Writing own Kubernetes operator in Java","name":"Writing own Kubernetes operator in Java","description":"Operators introduced by CoreOS in 2016 are now considered early majority on Categories of Adopters scale.","datePublished":"2024-10-04T00:00:00.000Z","author":[],"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="DG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="DG Atom Feed"><link rel="stylesheet" href="/assets/css/styles.06b657aa.css">
<script src="/assets/js/runtime~main.34728806.js" defer="defer"></script>
<script src="/assets/js/main.6add1264.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025/01/18/">Introducing concurrency solver</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025/01/10/">My exploration of WASM/WASI</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/12/29/">Christmas with Quantum Mechanics</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/12/15/">Thoughts on observability</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/11/5/">Reflections after writing simple Spring Boot library</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/29/">1BRC Challenge</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/26/">Topology graphs are important (and fun)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/4/">Writing own Kubernetes operator in Java</a></li></ul></div></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2025/01/18/">Introducing concurrency solver</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-01-18T00:00:00.000Z">January 18, 2025</time> · <!-- -->4 min read</div></header><div class="markdown"><p>Lately at work most of the staff is puzzled with mysterious bug. In short there is a statemachine that
processes movements in batches. But sometimes one particular movement is duplicated and nobody knows why...</p>
<p>I wish I could brag I solved it myself, but that is not the case. But it inspired me to dig a little bit in
theory how distributed systems/concurrency is reasoned about and visualized.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="time-space-diagrams">Time space diagrams<a href="#time-space-diagrams" class="hash-link" aria-label="Direct link to Time space diagrams" title="Direct link to Time space diagrams">​</a></h2>
<p>I have read about them in some book long ago and was looking for some time find the correct name. It&#x27;s pretty niche
concept, but in my opinon unjustly. They are so good to visualize not only distributed systems but also concurrency.</p>
<p>Let me show you.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/synchronization-dbc9b26836047fe459e817fc7eff85b0.png" width="1229" height="432" class="img_ev3q"></p>
<p>This is the basic case of dirty read, var a is not lock and therefore instead of being increamented it is wrote twice
with same value 2. The example is pretty silly but you can imagine more complex scenarios where the drawing would come in handy.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology">​</a></h3>
<p>So you can imagine that the horizontal lines and crossing arrows enforce partial ordering of the events. In cases of multithreading there is no
more to add but in case of distributed systems time flies different on each of the actors line.</p>
<p><strong>The cut</strong> is any line cutting the diagram in half so that the partial ordering of the events is preseved. You can think of it as a snapshot or
an instant in systems run. And it has associated with it a <strong>global state</strong> that corresponds to any variables on any actor alltogether.</p>
<p><strong>The run</strong> is a particular combination of actions runs <strong>while preserving the partial order</strong>. So you remember that one thread can be faster in one
go and in other go it can be faster than the others for instance.</p>
<p>If we had two threads and their actions lined up next to each other, then at each increment we would have 3 options:</p>
<ul>
<li>thread 1 executes, thread 2 waits</li>
<li>thread 1 waits, thread 2 executes</li>
<li>both execute</li>
</ul>
<p>So all possible runs would be 3^n with n pairs of actions. This is <strong>the lattice</strong> and from it we can generate all valid runs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introducing-octopus">Introducing Octopus<a href="#introducing-octopus" class="hash-link" aria-label="Direct link to Introducing Octopus" title="Direct link to Introducing Octopus">​</a></h3>
<p>So I thought - instead of instrumenting java code and what not, why not write little modelling tool in python. And reason about the correct concurrency
patters by enummerating all of the runs.</p>
<p>The tool that I wrote has one shared dictionary and multiple threads &quot;processes&quot;. Processes interact with the shared state by several primitives:</p>
<ul>
<li>read at path</li>
<li>write at path</li>
<li>compute next local state on old local state</li>
<li>lock at path</li>
<li>unlock at path</li>
<li>noop (for testing purposes)</li>
</ul>
<p>It turns out that locking,writing and reading on XPath is really powerful and I think you can model with it any concurrency problem I know - for example
Dining Philosophers.</p>
<p>So <a href="https://github.com/vulture-dominiczek/octopus" target="_blank" rel="noopener noreferrer">here</a> it is.</p>
<p>To tease it up a little bit modelling looks like this:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">abspath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__file__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;..&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> core </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DataTransfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> api </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Octo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> PrintOpts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># PrintOpts.PRINT_LOCALS = False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Octo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">init_shared_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Octo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Alice&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Octo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Bob&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">incA</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">locals</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">locals</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">DataTransfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">from_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> to_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">incA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> description</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;Increment a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">DataTransfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">from_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> to_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">DataTransfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">from_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> to_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">incA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> description</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;Increment a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">DataTransfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">from_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> to_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Octo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">solve_lattice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;output.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> validity_check</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>About aforementioned problem here is solver output <a href="/assets/files/out1-f35b5df04c897ebe8aba7052231e4b69.txt" target="_blank">without locks</a>.</p>
<p>And here is with <a href="/assets/files/out2-fbe203ee6c2e1365852619c5f420b65a.txt" target="_blank">locks</a>.</p>
<p>I wish I also add messaging to the tool if I have more time in the future.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3>
<p>Time flies when you are having fun. If I had to reason about concurrency issues I would use such tool I just created to ennumerate all the runs
and print out where the issue is.</p>
<p>Thanks</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/distributed">distributed</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2025/01/10/">My exploration of WASM/WASI</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-01-10T00:00:00.000Z">January 10, 2025</time> · <!-- -->4 min read</div></header><div class="markdown"><p>Assembler was developed in 1947, wow! It makes 78 years of computing development in which we saw higher level programming languages, virtual machine programming languages (write once run everywhere), virtual machines, cloud and so on. A lot of knowledge got accumulated over the time which you can see in size of artifacts deployed to cloud.</p>
<p>Over the years we have seen several attempts reach for the roots. Similarly <strong>WebAssembly</strong> is instruction format for virtual machine designed to be portable compilation target for any language willing. It is fast as nearly native speed, secure and sandboxed and language agnostic. Originally wrote for the browsers it is beginning to get traction as microservice runtime, which btw is topic of this post.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/wasm">wasm</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/fermyonspin">fermyonspin</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about My exploration of WASM/WASI" href="/blog/2025/01/10/"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/12/29/">Christmas with Quantum Mechanics</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-29T00:00:00.000Z">December 29, 2024</time> · <!-- -->4 min read</div></header><div class="markdown"><p>Christmas is wonderful time, although not without challenges. Particular challenge for me is to keep mind fresh and not sleep all the time. I like the atmospehere of going to saint masses and eating good food (with couple of drinks) and stuff but as always I felt a little bit lazy.</p>
<p>So to exercise my brain a little I found out <a href="https://learning.quantum.ibm.com/" target="_blank" rel="noopener noreferrer">this course in quantum computation</a>. It was great fun in short. I was constantly on the edge of my cognitive possiblities, but the material was made crystal clear. I developed a particular method to finish one module at the time in the afternoon and rehearse reading part during mornings. I had a little bit of crysis on first day of Christmas but managed to carry on half consciously.</p>
<p>And finally on the return home I passed the test with 75% score.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/systems">systems</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/math">math</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/quantum">quantum</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Christmas with Quantum Mechanics" href="/blog/2024/12/29/"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/12/15/">Thoughts on observability</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-15T00:00:00.000Z">December 15, 2024</time> · <!-- -->4 min read</div></header><div class="markdown"><p><em>Everything is complicated, even those things that seem flat in their bleakness.</em></p>
<p>Debugging microservices application based on scarce information is one of those cases that I don&#x27;t wish
anyone. But it is how it is at my current project, so management started to put some measures in motion.</p>
<p>I reaserched topic a bit at work and a bit on my own and I have something to share - <a href="https://opentelemetry.io/" target="_blank" rel="noopener noreferrer">OpenTelemetry is the future</a>. Bu it is still work in progress.</p>
<p>In this post I will tell you everything I learned.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/systemdesign">systemdesign</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cloud">cloud</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kubernetes">kubernetes</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Thoughts on observability" href="/blog/2024/12/15/"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/11/5/">Reflections after writing simple Spring Boot library</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-11-05T00:00:00.000Z">November 5, 2024</time> · <!-- -->4 min read</div></header><div class="markdown"><p><em>Sometimes learning from adversity is better than trying to avoid it.
Taking it into careful consideration provides valuable lessons that will support you in the future.</em></p>
<p>I appreciate my job for one particular thing. That is, it provides steady steam of difficult problems that challenge my intellect. Recently I tried to wrap my head around problem how to write tests for semi-large Spring Boot codebase and refactor it (with no tests whatsoever).</p>
<p>I started from the assumption that when you don&#x27;t have any legacy tests at hand first you write them. How can you know you don&#x27;t break functionality without running the tests? But the code was very unfriendly and writing them would require writing mocks.</p>
<p>So I thought - why not automate stuff a little bit:</p>
<ul>
<li>instrument given beans with reflection</li>
<li>dump args and results to json</li>
<li>load json directly in tests instead of writing mocks in plain Java</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/systemdesign">systemdesign</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/spring">spring</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/java">java</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Reflections after writing simple Spring Boot library" href="/blog/2024/11/5/"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/10/29/">1BRC Challenge</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-29T00:00:00.000Z">October 29, 2024</time> · <!-- -->12 min read</div></header><div class="markdown"><p>One thing that recently got nerd the hell out of me was 1 billion row challenge. Citing the original site:</p>
<p><em>Your mission, should you decide to accept it, is deceptively simple: write a Java program for retrieving temperature measurement values from a text file and calculating the min, mean, and max temperature per weather station. There’s just one caveat: the file has 1,000,000,000 rows!</em></p>
<p>I was working on it after hourse and 1 week after taking on the challenge there are several conclusions worth writing about.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/java">java</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/optimization">optimization</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 1BRC Challenge" href="/blog/2024/10/29/"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/10/26/">Topology graphs are important (and fun)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-26T00:00:00.000Z">October 26, 2024</time> · <!-- -->3 min read</div></header><div class="markdown"><p>Recently I watched the presentation from Microsoft about Radius. They developed the tool to foster the collaboration between devops and developers. In nutshell devops create &quot;recipies&quot; in Bicep or Terraform and developers use them to deploy the application. Seems cool.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/k-8-s">k8s</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/openshift">openshift</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Topology graphs are important (and fun)" href="/blog/2024/10/26/"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2024/10/4/">Writing own Kubernetes operator in Java</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-04T00:00:00.000Z">October 4, 2024</time> · <!-- -->6 min read</div></header><div class="markdown"><p>Operators introduced by <a href="https://www.redhat.com/en/blog/introducing-operators-putting-operational-knowledge-into-software" target="_blank" rel="noopener noreferrer">CoreOS</a> in 2016 are now considered early majority on Categories of Adopters scale.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/k-8-s">k8s</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/java">java</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/devops">devops</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Writing own Kubernetes operator in Java" href="/blog/2024/10/4/"><b>Read more</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"></div></footer></div>
</body>
</html>